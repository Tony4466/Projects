<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chess Game</title>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.11.0/brython.min.js"></script>
<style>
    body { font-family: Arial; text-align:center; }
    canvas { border:1px solid black; margin-top:20px; }
</style>
</head>
<body onload="brython()">

<h1>Chess Game</h1>
<canvas id="chessboard" width="480" height="480"></canvas>

<script type="text/python">
from browser import document, html
canvas = document["chessboard"]
ctx = canvas.getContext("2d")

# Board constants
board_size = 8
square_size = canvas.width / board_size
WHITE = "#F0D9B5"
BLACK = "#B58863"
HIGHLIGHT = "#ADD8E6"

# Sample board ('.' empty, uppercase=white, lowercase=black)
board = [
    ["r","n","b","q","k","b","n","r"],
    ["p"]*8,
    ["."]*8,
    ["."]*8,
    ["."]*8,
    ["."]*8,
    ["P"]*8,
    ["R","N","B","Q","K","B","N","R"]
]

# Unicode pieces
pieces_unicode = {
    "K":"♔","Q":"♕","R":"♖","B":"♗","N":"♘","P":"♙",
    "k":"♚","q":"♛","r":"♜","b":"♝","n":"♞","p":"♟︎"
}

selected = None
legal_moves = []

def draw_board(ev=None):
    for r in range(board_size):
        for c in range(board_size):
            color = WHITE if (r+c)%2==0 else BLACK
            if selected and (r,c) in legal_moves:
                color = HIGHLIGHT
            ctx.fillStyle = color
            ctx.fillRect(c*square_size, r*square_size, square_size, square_size)
            
            piece = board[r][c]
            if piece != ".":
                ctx.fillStyle = "black" if piece.islower() else "white"
                ctx.font = f"{int(square_size*0.8)}px Arial"
                ctx.fillText(pieces_unicode[piece], c*square_size+5, r*square_size+square_size-10)

draw_board()

# Click handler
def click(ev):
    global selected, legal_moves
    col = int(ev.offsetX / square_size)
    row = int(ev.offsetY / square_size)
    piece = board[row][col]
    
    if selected:
        # move piece
        sr, sc = selected
        board[row][col] = board[sr][sc]
        board[sr][sc] = "."
        selected = None
        legal_moves = []
    else:
        if piece != ".":
            selected = (row, col)
            # for demo, allow moving anywhere
            legal_moves = [(r,c) for r in range(8) for c in range(8)]
    
    draw_board()

canvas.bind("click", click)
</script>
</body>
</html>
